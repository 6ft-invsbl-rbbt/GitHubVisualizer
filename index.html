<html>
<head>
  <style>
    /* html5doctor.com Reset v1.6.1 - http://cssreset.com */
    html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{background-color:#ff9;color:#000;text-decoration:none}mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}

    .popup {
      position: absolute;
      overflow: hidden;
      z-index: 10;
    }
     
    #controls {
      left: 0;
      top: 0;
      z-index: 11;
      padding: 5px;
    }
     
    #console {
      bottom: 0;
      left: 0;
      z-index: 100;
    }

    /* progress bar */
    /*
    .meter {
        overflow: hidden;
        position: relative;
        background: #555;
        padding: 10px;
        -webkit-box-shadow: inset 0 -1px 1px rgba(255, 255, 255, 0.3);
        -moz-box-shadow: inset 0 -1px 1px rgba(255, 255, 255, 0.3);
        box-shadow: inset 0 -1px 1px rgba(255, 255, 255, 0.3);
    }

    .meter > span {
        display: block;
        background-color: rgb(43, 194, 83);
        background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, rgb(43, 194, 83)), color-stop(1, rgb(84, 240, 84)));
        background-image: -moz-linear-gradient(center bottom, rgb(43, 194, 83) 37%, rgb(84, 240, 84) 69%);
        -webkit-box-shadow: inset 0 2px 9px rgba(255, 255, 255, 0.3), inset 0 -2px 6px rgba(0, 0, 0, 0.4);
        -moz-box-shadow: inset 0 2px 9px rgba(255, 255, 255, 0.3), inset 0 -2px 6px rgba(0, 0, 0, 0.4);
        box-shadow: inset 0 2px 9px rgba(255, 255, 255, 0.3), inset 0 -2px 6px rgba(0, 0, 0, 0.4);
        position: relative;
        overflow: hidden;
    }

    .orange > span {
        background-color: #f1a165;
        background: rgb(241,161,101); *//* Old browsers *//*
        *//* IE9 SVG, needs conditional override of 'filter' to 'none' *//*
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2YxYTE2NSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmMzZkMGEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  rgba(241,161,101,1) 0%, rgba(243,109,10,1) 100%); *//* FF3.6+ *//*
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(241,161,101,1)), color-stop(100%,rgba(243,109,10,1))); *//* Chrome,Safari4+ *//*
        background: -webkit-linear-gradient(top,  rgba(241,161,101,1) 0%,rgba(243,109,10,1) 100%); *//* Chrome10+,Safari5.1+ *//*
        background: -o-linear-gradient(top,  rgba(241,161,101,1) 0%,rgba(243,109,10,1) 100%); *//* Opera 11.10+ *//*
        background: -ms-linear-gradient(top,  rgba(241,161,101,1) 0%,rgba(243,109,10,1) 100%); *//* IE10+ *//*
        background: linear-gradient(to bottom,  rgba(241,161,101,1) 0%,rgba(243,109,10,1) 100%); *//* W3C *//*
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f1a165', endColorstr='#f36d0a',GradientType=0 ); *//* IE6-8 *//*

    }

    .red > span {
        background-color: #f0a3a3;
        background-image: -moz-linear-gradient(top, #f0a3a3, #f42323);
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #f0a3a3), color-stop(1, #f42323));
        background-image: -webkit-linear-gradient(#f0a3a3, #f42323);
    }

    .progressBar {
        font-size: 11px;
        width: 100%;
    }

    .progressBar .meter {
        margin: 0;
        padding: 1px;
    }

    #progressBar {
        text-align: right;
        vertical-align: middle;
        color: white;
        text-shadow: 0 1px 1px black;
    }
    */
    /* end progress bar */
    /*
    #statusBar {
        bottom: 0;
        left: 0;

        z-index: 12;
        width: 100%;
        position: fixed;

        border: 0;
        border-top: 1px solid #CACACA;

        background: rgb(239,239,239); *//* Old browsers *//*
        *//* IE9 SVG, needs conditional override of 'filter' to 'none' *//*
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2VmZWZlZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQxJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNjYWNhY2EiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  rgba(239,239,239,1) 0%, rgba(221,221,221,1) 41%, rgba(202,202,202,1) 100%); *//* FF3.6+ *//*
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(239,239,239,1)), color-stop(41%,rgba(221,221,221,1)), color-stop(100%,rgba(202,202,202,1))); *//* Chrome,Safari4+ *//*
        background: -webkit-linear-gradient(top,  rgba(239,239,239,1) 0%,rgba(221,221,221,1) 41%,rgba(202,202,202,1) 100%); *//* Chrome10+,Safari5.1+ *//*
        background: -o-linear-gradient(top,  rgba(239,239,239,1) 0%,rgba(221,221,221,1) 41%,rgba(202,202,202,1) 100%); *//* Opera 11.10+ *//*
        background: -ms-linear-gradient(top,  rgba(239,239,239,1) 0%,rgba(221,221,221,1) 41%,rgba(202,202,202,1) 100%); *//* IE10+ *//*
        background: linear-gradient(to bottom,  rgba(239,239,239,1) 0%,rgba(221,221,221,1) 41%,rgba(202,202,202,1) 100%); *//* W3C *//*
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#efefef', endColorstr='#cacaca',GradientType=0 ); *//* IE6-8 *//*
    }


    #statusBar ul {
        padding: 2px 3px;
        overflow: hidden;
        margin: 0;
        list-style: none;
    }

    #statusBar li {
        display: block;
        vertical-align: middle;
        float: left;
        margin-right: 2px;
        border: 0;
        border-right: 1px solid #444;
    }

    #statusBar li:last-child {
        margin-right: 0;
        border-right: 0;
    }*/

    #ldrTop {
        display: none;
    }
  </style>
  <script src="http://d3js.org/d3.v3.min.js"></script>
</head>
<body>

<div id="controls" class="popup">
  <img id="ldrTop" alt="" src="data:image/gif;base64,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" />
  <label for="user">User:</label>
  <input type="text" id="user">
  <label for="repo">Repo:</label>
  <select id="repo">
    <option disabled="disabled">Select repo...</option>
  </select>
</div>

<div id="statusBar" class="popup">
    <ul>
        <li class="progressBar">
            <div class="meter orange" style="display: none">
                <span id="progressBar" style="width: 250px">Loading...</span>
            </div>
        </li>
    </ul>
</div>

<div id="canvas"></div>

<div id="console" class="popup"></div>

<!-- JSONP -->
<script type="text/javascript">
(function(window) {
    if (!window || !window.document)
        return;

    var seq = 0, // sequent
            document = window.document;

    /**
     * JSONP
     * @param {String} uri The URL you are requesting with the JSON data (you may include URL params).
     * @param {Function} callback The callback function which you want to execute for JSON data (JSON response is first argument).
     * @param {Object} params The params contains data about callback param's name, onload function and onerror function.
     * Params have next structure:
     * params = {
     *      callbackParam : '', default is callback
     *      onerror_callback : function() {},
     *      onload_callback : function() {},
     *      script_order : 'defer' | 'async' (is default)
     *}
     */
    window.JSONP = window.JSONP || function(uri, callback, params) {
        if (!arguments.length || arguments.length < 2)
            return;

        uri = uri || '';
        callback = callback || function() {};
        params = params || {};

        params.callbackParam = params.callbackParam || 'callback'

        uri += uri.indexOf('?') === -1 ? '?' : '&';

        function clear() {
            try {
                delete window[id];
            } catch(e) {
                window[id] = null;
            }
            document.documentElement.removeChild(script);
        }

        function response() {
            clear();
            callback.apply(this, arguments);
        }

        function doError() {
            clear();
            params.onerror && params.onerror.apply(this, arguments);
        }

        function doLoad() {
            params.onload && params.onload.apply(this, arguments);
        }

        var id = '_JSONP_' + seq++,
                script = document.createElement('script');

        window[id] = response;

        params.script_order = params.script_order || 'async';

        script.onload = doLoad;
        script.onerror = doError;
        script.setAttribute(params.script_order, params.script_order);
        script.setAttribute('src', uri + params.callbackParam + '=' + id);

        document.documentElement.insertBefore(
                script,
                document.documentElement.lastChild
        );
    }
})(window);
</script>
<!-- end JSONP -->

<script type="text/javascript">
    'use strict';

    var ghcs = {users: {}};


    var log = (function () {
        var logCont = d3.select("#console")
                .append("ul");
        return function (msg) {
            logCont.append("li").text(msg);
        }
    })();

    var w = document.width,
            h = document.height,
            svg = d3.select("#canvas")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h),
            gitData;


    var ldrTop = d3.select("#ldrTop");
    ldrTop.show = function () {
        this.style("display", "inline-block");
    };
    ldrTop.hide = function () {
        this.style("display", null);
    };

    function loadGitData() {
        JSONP("", function (data) {
        });
    }

    function chSelect(e) {
        e = d3.select(this[this.selectedIndex]).datum();
        if (e && ghcs.repo != e) {
            ghcs.repo = e;
            ldrTop.show();
            JSONP(e.url, function (data) {
                ldrTop.hide();
            });
        }
    }

    function parseRepos(data) {
        ldrTop.hide();
        var opts = d3.select("#repo")
                        .on("change", null)
                        .selectAll("option.ritem"),
                lbl = d3.selectAll("label[for='repo']");

        lbl.text("Repo:");

        opts.remove();
        if (data) {
            if (!ghcs.users.hasOwnProperty(ghcs.login) || !ghcs.users[ghcs.login].hasOwnProperty("repos")) {
                ghcs.users[ghcs.login].repos = data.filter(function (d) {
                    return !d.private;
                }).map(function (d) {
                    return {
                        id: d.id,
                        name: d.name,
                        url: d.url
                    };
                });
            }

            if (ghcs.users[ghcs.login].repos.length) {
                opts.data(ghcs.users[ghcs.login].repos, function(d) {
                            return d.id;
                        })
                        .enter()
                        .append("option")
                        .text(function (d) {
                            return d.name
                        })
                        .attr("class", "ritem");
                lbl.text("Repo (" + ghcs.users[ghcs.login].repos.length + "):");
                d3.select("#repo")
                        .on("change", chSelect);
            }
        }
        else if (ghcs.users.hasOwnProperty(ghcs.login) && ghcs.users[ghcs.login].hasOwnProperty("repos"))
            delete ghcs.users[ghcs.login]["repos"];
    }

    d3.select("#user")
            .on("change", function (e) {
                if (ghcs.chUserTimer) {
                    clearTimeout(ghcs.chUserTimer);
                    delete ghcs.chUserTimer;
                }
                ghcs.chUserTimer = setTimeout((function (login) {
                    return function () {
                        if (login) {
                            ghcs.login = login;
                            if (!ghcs.users.hasOwnProperty(login) || !ghcs.users[login].hasOwnProperty("repos")) {
                                ldrTop.show();
                                JSONP("https://api.github.com/users/" + login, function (data) {
                                    if (!data || !data.meta || data.meta.status != 200 || !data.data) {
                                        parseRepos(null);
                                        return;
                                    }

                                    data = data.data;

                                    ghcs.users[data.login] = {info: data};
                                    ghcs.login = data.login;

                                    if (data.repos_url)
                                        JSONP(data.repos_url, function(req) {
                                            parseRepos(req && req.meta && req.meta.status == 200 && req.data ? req.data : null);
                                        });
                                    else
                                        parseRepos(null);
                                });
                            }
                            else
                                parseRepos(ghcs.users[login].repos);
                        }
                    }
                })(this.value), 100);
            });
</script>

</body>
</html>